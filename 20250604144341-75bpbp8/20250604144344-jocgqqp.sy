{"ID":"20250604144344-jocgqqp","Spec":"1","Type":"NodeDocument","Properties":{"id":"20250604144344-jocgqqp","title":"烧录","type":"doc","updated":"20251017170554"},"Children":[{"ID":"20250604155939-rn61mum","Type":"NodeParagraph","Properties":{"id":"20250604155939-rn61mum","updated":"20250604155944"},"Children":[{"Type":"NodeText","Data":"烧录内核"}]},{"ID":"20250604155945-t89w0jo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250604155945-t89w0jo","updated":"20250930170403"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"fatload mmc 1 0x40008000 zimage-dtb_nor_header.bin\n\nsf probe 0;sf erase 0x120000 0x800000;sf write 0x40008000 0x120000 0x800000\n\nsetenv bootcmd 'sf probe 0;sf read 0x40008000 0x120000 0x500000;bootz 0x40008000 - 0x41000000'\n\nsf probe 0;sf read 0x40008000 0x120000 0x500000;bootz 0x40008000 - 0x41000000\n****************************************************************************\nsf probe 0;sf erase 0x120000 0xff8000;sf write 0x40008000 0x120000 0xff8000\n\nsetenv bootcmd 'sf probe 0;sf read 0x40007800 0x120000 0xff8000;bootx 0x40008000 - 0x41000000'\n\nsf probe 0;sf read 0x40007800 0x120000 0xff8000;bootx 0x40008000 - 0x41000000\n****************************************************************************\nfatls mmc 0;mmc dev 0;mmc info;mmc erase 0x2000 0x800;mmc write 0x40008000 0x2000 0x800\nsetenv bootcmd 'mmc dev;mmc info;mmc read 0x40007800 0x2000 0x800;bootx 0x40008000 - 0x41000000'\nmmc dev;mc info;mmc read 0x40007800 0x2000 0x800;bootx 0x40008000 - 0x41000000\n\n\nfatls mmc 0:0;mmc dev 0;mmc info;mmc erase 0x3000  0x10000;mmc write 0x40008000 0x3000 0x10000\nsetenv bootcmd 'fatls mmc 0:0;mmc dev 0;mmc info;mmc read 0x40008000 0x5800  0x2800;bootz 0x40008000 - 0x41000000'\nmmc dev 0;mmc info;mmc read 0x40008000  0x5800  0x2800;bootz 0x40008000 - 0x41000000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251009143408-zyumed0","Type":"NodeParagraph","Properties":{"id":"20251009143408-zyumed0","updated":"20251009143414"},"Children":[{"Type":"NodeText","Data":"烧录固件镜像"}]},{"ID":"20251009143415-drsvgc2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251009143415-drsvgc2","updated":"20251014170819"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"fatload mmc 1 0x40008000 flash_combined.bin;sf probe 0;sf erase 0x0 0x2000000;sf write 0x40008000 0x0 0x2000000\nfatload mmc 1 0x44000000 flash_combined.bin;fatls mmc 0:0;mmc dev 0;mmc info;mmc write 0x44000000 0x0 0x15000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250623103350-nvalkgg","Type":"NodeParagraph","Properties":{"id":"20250623103350-nvalkgg","updated":"20250623103358"},"Children":[{"Type":"NodeText","Data":"烧录根文件系统"}]},{"ID":"20250623103358-3ri1rao","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250623103358-3ri1rao","updated":"20250915112931"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"fatload mmc 1 0x40008000 fullhan/rootfs.jffs2.4k.img\nfatload mmc 1 0x40008000 fullhan/rootfs.squash.img\nsf probe 0;sf erase 0x620000 0x18E0000;sf write 0x40008000 0x620000 0x18E0000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250604161238-jsbwmog","Type":"NodeParagraph","Properties":{"id":"20250604161238-jsbwmog","updated":"20250605190414"},"Children":[{"Type":"NodeText","Data":"烧录uboot"}]},{"ID":"20250605190414-0e6ymep","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250605190414-0e6ymep","updated":"20250605192623"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"fatload mmc 1 0x40008000 fullhan/uboot_nor_header.bin\nsf probe 0;sf erase 0x10000 0x100000;sf write 0x40008000 0x10000 0x100000\n\nfatls mmc 0;mmc dev 0;mmc info;mmc erase 0x2000 0x800;mmc write 0x40008000 0x2000 0x800\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250813192614-rd1vgjh","Type":"NodeParagraph","Properties":{"id":"20250813192614-rd1vgjh","updated":"20250813192638"},"Children":[{"Type":"NodeText","Data":"打包config jffs2系统"}]},{"ID":"20250813192626-s6est17","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250813192626-s6est17","updated":"20250915111346"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"mkfs.jffs2 -r config -o config.img -n -e 0x1000 -s 0x1000 --pad=0x100000\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250605170344-5837unm","Type":"NodeParagraph","Properties":{"id":"20250605170344-5837unm","updated":"20250626134708"},"Children":[{"Type":"NodeText","Data":"制作整个镜像"}]},{"ID":"20250626134709-91gdmcx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20250626134709-91gdmcx","updated":"20251017170554"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"//have uboot\ndd if=/dev/zero of=flash_combined.bin bs=512 count=0 seek=$((0x2000000))\ndd if=spl/u-boot-spl_nor_header.bin of=flash_combined.bin bs=512 seek=$((0x000000)) conv=notrunc\ndd if=boot/uboot_nor_header.bin of=flash_combined.bin bs=512 seek=$((0x010000)) conv=notrunc\nmkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n \"XC01_KERNEL\" -d kernel/zImage-dtb kernel/uImage\ndd if=kernel/uImage of=flash_combined.bin bs=512 seek=$((0x11FFC0)) conv=notrunc\ndd if=rootfs.squash.img of=flash_combined.bin bs=512 seek=$((0x620000)) conv=notrunc\ndd if=config.img of=flash_combined.bin bs=512 seek=$((0x1F00000)) conv=notrunc\nmkimage -A arm -O linux -T firmware -C none -a 0x0 -e 0x0 -n \"XC01_FW\" -d flash_combined.bin flash_combined.image\n\n//none uboot\ndd if=/dev/zero of=none_uboot_flash_combined.bin bs=512 count=0 seek=$((0x1520040))\nmkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n \"XC01_KERNEL\" -d kernel/zImage-dtb kernel/uImage\ndd if=kernel/uImage of=none_uboot_flash_combined.bin bs=512 seek=$((0x0)) conv=notrunc\ndd if=rootfs.squash.img of=none_uboot_flash_combined.bin bs=512 seek=$((0x800040)) conv=notrunc\ndd if=config.img of=none_uboot_flash_combined.bin bs=512 seek=$((0x1500040)) conv=notrunc\nmkimage -A arm -O linux -T firmware -C none -a 0x0 -e 0x0 -n \"XC01_FW\" -d none_uboot_flash_combined.bin none_uboot_flash_combined.image\n\n//none uboot noen config\ndd if=/dev/zero of=none_uboot_flash_combined.bin bs=512 count=0 seek=$((0x1DE0040))\nmkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n \"XC01_KERNEL\" -d kernel/zImage-dtb kernel/uImage\ndd if=kernel/uImage of=none_uboot_flash_combined.bin bs=512 seek=$((0x0)) conv=notrunc\ndd if=rootfs.squash.img of=none_uboot_flash_combined.bin bs=512 seek=$((0x500040)) conv=notrunc\nmkimage -A arm -O linux -T firmware -C none -a 0x0 -e 0x0 -n \"XC01_FW\" -d none_uboot_flash_combined.bin none_uboot_flash_combined.image\n\n//emmc all\ndd if=/dev/zero of=flash_combined.bin bs=512 count=0 seek=$((0x2A00000))\ndd if=spl/u-boot-spl_emmc_header.bin of=flash_combined.bin bs=512 seek=$((0x000000)) conv=notrunc\ndd if=boot/uboot_emmc_header.bin of=flash_combined.bin bs=512 seek=$((0x400000)) conv=notrunc\nmkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n \"XC01_KERNEL\" -d kernel/zImage-dtb kernel/uImage\ndd if=kernel/uImage of=flash_combined.bin bs=512 seek=$((0x5FFFC0)) conv=notrunc\ndd if=rootfs.squash.img of=flash_combined.bin bs=512 seek=$((0xB00000)) conv=notrunc\ndd if=config.img of=flash_combined.bin bs=512 seek=$((0x2900000)) conv=notrunc\nmkimage -A arm -O linux -T firmware -C none -a 0x0 -e 0x0 -n \"XC01_FW\" -d flash_combined.bin flash_combined.image\n\n//emmc ota\ndd if=/dev/zero of=none_uboot_flash_combined.bin bs=512 count=0 seek=$((0x2300040))\nmkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n \"XC01_KERNEL\" -d kernel/zImage-dtb kernel/uImage\ndd if=kernel/uImage of=none_uboot_flash_combined.bin bs=512 seek=$((0x0)) conv=notrunc\ndd if=rootfs.squash.img of=none_uboot_flash_combined.bin bs=512 seek=$((0x500040)) conv=notrunc\nmkimage -A arm -O linux -T firmware -C none -a 0x0 -e 0x0 -n \"XC01_FW\" -d none_uboot_flash_combined.bin none_uboot_flash_combined.image\n\n/*uboot用*/\nmkimage -A arm -O linux -T firmware -C none -a 0x0 -e 0x0 -n \"XC01_FW\" -d flash_combined.bin flash_combined.image\nmkimage -A arm -O linux -T kernel -C none -a 0x40008000 -e 0x40008000 -n \"XC01_KERNEL\" -d zImage-dtb uImage\n/*程序用*/\ncrc32 flash_combined.bin   -\u003e b59f5ceb //得到的CRC值\nprintf \"\\xeb\\x5c\\x9f\\xb5\" | cat - flash_combined.bin \u003e firmware_crc.bin\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20250919161722-iuuo6nj","Type":"NodeParagraph","Properties":{"id":"20250919161722-iuuo6nj","updated":"20250919161722"}}]}