{"ID":"20251112221630-ef99rxi","Spec":"1","Type":"NodeDocument","Properties":{"id":"20251112221630-ef99rxi","title":"结构体自引用","type":"doc","updated":"20251112225810"},"Children":[{"ID":"20251112225434-m7qmw37","Type":"NodeParagraph","Properties":{"id":"20251112225434-m7qmw37","updated":"20251112225636"},"Children":[{"Type":"NodeText","Data":"自引用生命周期变化，s的所有权发生转移"}]},{"ID":"20251112221630-87zuvzb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251112221630-87zuvzb","updated":"20251112225427"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"struct SelfRef\u003c'a\u003e {\n    value: String,\n\n    // 该引用指向上面的value\n    pointer_to_value: \u0026'a str,\n}\nfn main(){\n    let s = \"aaa\".to_string();\n    let v = SelfRef {\n        value: s,\n        pointer_to_value: \u0026s\n    };\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251112225637-gp3nbs9","Type":"NodeParagraph","Properties":{"id":"20251112225637-gp3nbs9","updated":"20251112225810"},"Children":[{"Type":"NodeText","Data":"用Option：返回对的name发生所有权转移，'a生命周期凭空出现"}]},{"ID":"20251112225721-ab07ia1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251112225721-ab07ia1","updated":"20251112225728"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"fn creator\u003c'a\u003e() -\u003e WhatAboutThis\u003c'a\u003e {\n    let mut tricky = WhatAboutThis {\n        name: \"Annabelle\".to_string(),\n        nickname: None,\n    };\n    tricky.nickname = Some(\u0026tricky.name[..4]);\n\n    tricky\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}