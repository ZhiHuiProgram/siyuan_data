{"ID":"20251114223946-6415cm8","Spec":"1","Type":"NodeDocument","Properties":{"id":"20251114223946-6415cm8","title":"使用多线程","type":"doc","updated":"20251114225150"},"Children":[{"ID":"20251114223950-y9mk787","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251114223950-y9mk787","updated":"20251114224424"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/advance/concurrency-with-threads/thread.html#%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B","TextMarkTextContent":"创建线程"},{"Type":"NodeText","Data":" ：闭包或者函数"}]},{"ID":"20251114223951-qwscsf9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251114223951-qwscsf9","updated":"20251114224424"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::thread;\nuse std::time::Duration;\n\nfn main() {\n    let handle = thread::spawn(|| {\n        for i in 1..5 {\n            println!(\"hi number {} from the spawned thread!\", i);\n            thread::sleep(Duration::from_millis(1));\n        }\n    });\n\n    handle.join().unwrap();  //join线程，线程可能返回东西\n\n    for i in 1..5 {\n        println!(\"hi number {} from the main thread!\", i);\n        thread::sleep(Duration::from_millis(1));\n    }\n}\n\nfn my_func() -\u003e i32{\n    for tt in 1..10  {\n        println!(\"this is {}\",tt);\n        thread::sleep(Duration::from_millis(100));\n    }\n    32\n}\n\nfn main(){\n    let ret= thread::spawn(my_func);\n    ret.join();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251114224823-allqehx","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251114224823-allqehx","updated":"20251114225150"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/advance/concurrency-with-threads/thread.html#%E5%9C%A8%E7%BA%BF%E7%A8%8B%E9%97%AD%E5%8C%85%E4%B8%AD%E4%BD%BF%E7%94%A8-move","TextMarkTextContent":"在线程闭包中使用 move"}]},{"ID":"20251114224824-g6dc7hd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251114224824-g6dc7hd","updated":"20251114225149"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::thread;\n\nfn main() {\n    let v = vec![1, 2, 3];  \n\n    let handle = thread::spawn(move || {  //这里加了move\n        println!(\"Here's a vector: {:?}\", v); //闭包无法确定捕获的v会活多久\n    });\n\n\t//如果 drop(v);\n    handle.join().unwrap();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251114225150-gq8s6jw","Type":"NodeParagraph","Properties":{"id":"20251114225150-gq8s6jw","updated":"20251114225150"}}]}