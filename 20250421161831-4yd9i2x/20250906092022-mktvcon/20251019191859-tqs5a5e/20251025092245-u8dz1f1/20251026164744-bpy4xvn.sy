{"ID":"20251026164744-bpy4xvn","Spec":"1","Type":"NodeDocument","Properties":{"id":"20251026164744-bpy4xvn","title":"newtype和类型别名","type":"doc","updated":"20251026231655"},"Children":[{"ID":"20251026164801-puvqx16","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251026164801-puvqx16","updated":"20251026231119"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/advance/into-types/custom-type.html#newtype","TextMarkTextContent":"newtype"}]},{"ID":"20251026164803-ywfc6zx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251026164803-ywfc6zx","updated":"20251026164815"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"何为 newtype？简单来说，就是使用元组结构体的方式将已有的类型包裹起来：struct Meters(u32);，那么此处 Meters 就是一个 newtype\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251026164822-8rm7ti9","Type":"NodeList","ListData":{},"Properties":{"id":"20251026164822-8rm7ti9","updated":"20251026164822"},"Children":[{"ID":"20251026164822-zrb418m","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251026164822-zrb418m","updated":"20251026164822"},"Children":[{"ID":"20251026164822-crqmcmk","Type":"NodeParagraph","Properties":{"id":"20251026164822-crqmcmk","updated":"20251026164822"},"Children":[{"Type":"NodeText","Data":"自定义类型可以让我们给出更有意义和可读性的类型名，例如与其使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"u32"},{"Type":"NodeText","Data":"​ 作为距离的单位类型，我们可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Meters"},{"Type":"NodeText","Data":"​，它的可读性要好得多"}]}]},{"ID":"20251026164822-4mt91nc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251026164822-4mt91nc","updated":"20251026164822"},"Children":[{"ID":"20251026164822-7qh9kem","Type":"NodeParagraph","Properties":{"id":"20251026164822-7qh9kem","updated":"20251026164822"},"Children":[{"Type":"NodeText","Data":"对于某些场景，只有 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"newtype"},{"Type":"NodeText","Data":"​ 可以很好地解决"}]}]},{"ID":"20251026164822-u924d0u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251026164822-u924d0u","updated":"20251026164822"},"Children":[{"ID":"20251026164822-o2s1ihk","Type":"NodeParagraph","Properties":{"id":"20251026164822-o2s1ihk","updated":"20251026164822"},"Children":[{"Type":"NodeText","Data":"隐藏内部类型的细节"}]}]}]},{"ID":"20251026180154-2sqxuvt","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20251026180154-2sqxuvt","updated":"20251026231119"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/advance/into-types/custom-type.html#%E4%B8%BA%E5%A4%96%E9%83%A8%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%A4%96%E9%83%A8%E7%89%B9%E5%BE%81","TextMarkTextContent":"为外部类型实现外部特征"},{"Type":"NodeText","Data":"："}]},{"ID":"20251026180228-tm0hisi","Type":"NodeParagraph","Properties":{"id":"20251026180228-tm0hisi","updated":"20251026180228"},"Children":[{"Type":"NodeText","Data":"孤儿规则：要为类型 A 实现特征 T，那么 A 或者 T 必须至少有一个在当前的作用范围内。"}]},{"ID":"20251026180155-l2vzdy9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251026180155-l2vzdy9","updated":"20251026231017"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::fmt;\n\nstruct Wrapper(Vec\u003cString\u003e);\n//给wrapper实现display特征。\nimpl fmt::Display for Wrapper {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"[{}]\", self.0.join(\", \"))\n    }\n}\n\nfn main() {\n    let w = Wrapper(vec![String::from(\"hello\"), String::from(\"world\")]);\n    println!(\"w = {}\", w);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251026231120-8p2w3pr","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251026231120-8p2w3pr","updated":"20251026231606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/advance/into-types/custom-type.html#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8Dtype-alias","TextMarkTextContent":"类型别名(Type Alias)"},{"Type":"NodeText","Data":" ："}]},{"ID":"20251026231322-3k206i9","Type":"NodeParagraph","Properties":{"id":"20251026231322-3k206i9","updated":"20251026231322"},"Children":[{"Type":"NodeText","Data":"有点像typedef"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"类型别名并不是一个独立的全新的类型，而是某一个类型的别名"}]},{"ID":"20251026231121-jke3air","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251026231121-jke3air","updated":"20251026231331"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"type Meters = u32  //type来了\n\nlet x: u32 = 5;\nlet y: Meters = 5;\n\nprintln!(\"x + y = {}\", x + y);\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251026231137-z1tzdkv","Type":"NodeParagraph","Properties":{"id":"20251026231137-z1tzdkv","updated":"20251026231459"},"Children":[{"Type":"NodeText","Data":"别名替代：名称太长且多次调用就不优美了"}]},{"ID":"20251026231445-vebgefs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251026231445-vebgefs","updated":"20251026231447"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"type Thunk = Box\u003cdyn Fn() + Send + 'static\u003e;\n\nlet f: Thunk = Box::new(|| println!(\"hi\"));\n\nfn takes_long_type(f: Thunk) {\n    // --snip--\n}\n\nfn returns_long_type() -\u003e Thunk {\n    // --snip--\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251026231606-jp08r3j","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251026231606-jp08r3j","updated":"20251026231655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/advance/into-types/custom-type.html#%E6%B0%B8%E4%B8%8D%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B","TextMarkTextContent":"!永不返回类型"}]},{"ID":"20251026231607-q0id4e0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251026231607-q0id4e0","updated":"20251026231655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"fn main() {\n    let i = 2;\n    let v = match i {\n       0..=3 =\u003e i,\n       _ =\u003e panic!(\"不合规定的值:{}\", i)\n    };\n}\npanic 的返回值是 !\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}