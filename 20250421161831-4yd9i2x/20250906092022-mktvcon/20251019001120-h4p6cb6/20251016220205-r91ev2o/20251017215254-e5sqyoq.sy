{"ID":"20251017215254-e5sqyoq","Spec":"1","Type":"NodeDocument","Properties":{"id":"20251017215254-e5sqyoq","title":"Use引用","type":"doc","updated":"20251017225738"},"Children":[{"ID":"20251017215304-tlc0hzi","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20251017215304-tlc0hzi","updated":"20251017215450"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97","TextMarkTextContent":"绝对路径引入模块"}]},{"ID":"20251017215305-kf9sv0u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017215305-kf9sv0u","updated":"20251017215313"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"mod front_of_house {\n    pub mod hosting {\n        pub fn add_to_waitlist() {}\n    }\n}\n\nuse crate::front_of_house::hosting;\n\npub fn eat_at_restaurant() {\n    hosting::add_to_waitlist();\n    hosting::add_to_waitlist();\n    hosting::add_to_waitlist();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017215312-1s5ptd4","Type":"NodeParagraph","Properties":{"id":"20251017215312-1s5ptd4","updated":"20251017215447"},"Children":[{"Type":"NodeText","Data":"相对路径引入模块"}]},{"ID":"20251017215447-t3uztp9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017215447-t3uztp9","updated":"20251017215448"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"mod front_of_house {\n    pub mod hosting {\n        pub fn add_to_waitlist() {}\n    }\n}\n\nuse front_of_house::hosting::add_to_waitlist;\n\npub fn eat_at_restaurant() {\n    add_to_waitlist();\n    add_to_waitlist();\n    add_to_waitlist();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017215605-cewxl1h","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251017215605-cewxl1h","updated":"20251017215830"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E9%81%BF%E5%85%8D%E5%90%8C%E5%90%8D%E5%BC%95%E7%94%A8","TextMarkTextContent":"避免同名引用"}]},{"ID":"20251017215607-kr2hyak","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017215607-kr2hyak","updated":"20251017215611"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::fmt;\nuse std::io;\n\nfn function1() -\u003e fmt::Result {\n    // --snip--\n}\n\nfn function2() -\u003e io::Result\u003c()\u003e {\n    // --snip--\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017215618-ai0c1j8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20251017215618-ai0c1j8","updated":"20251017215830"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a code","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#as-%E5%88%AB%E5%90%8D%E5%BC%95%E7%94%A8","TextMarkTextContent":"as"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#as-%E5%88%AB%E5%90%8D%E5%BC%95%E7%94%A8","TextMarkTextContent":" 别名引用"}]},{"ID":"20251017215619-a0uad2c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017215619-a0uad2c","updated":"20251017215629"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::fmt::Result;\nuse std::io::Result as IoResult;\n\nfn function1() -\u003e Result {\n    // --snip--\n}\n\nfn function2() -\u003e IoResult\u003c()\u003e {\n    // --snip--\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017215831-44v8ios","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251017215831-44v8ios","updated":"20251017221424"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E5%BC%95%E5%85%A5%E9%A1%B9%E5%86%8D%E5%AF%BC%E5%87%BA","TextMarkTextContent":"引入项再导出"},{"Type":"NodeText","Data":"：因为引入后变私有，所以加pub，持续引用"}]},{"ID":"20251017215834-0czu5d1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017215834-0czu5d1","updated":"20251017215839"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"mod front_of_house {\n    pub mod hosting {\n        pub fn add_to_waitlist() {}\n    }\n}\n\npub use crate::front_of_house::hosting;\n\npub fn eat_at_restaurant() {\n    hosting::add_to_waitlist();\n    hosting::add_to_waitlist();\n    hosting::add_to_waitlist();\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017215840-qzos0ss","Type":"NodeParagraph","Properties":{"id":"20251017215840-qzos0ss","updated":"20251017220028"},"Children":[{"Type":"NodeText","Data":"使用第三方包：重头戏"}]},{"ID":"20251017220024-bqgx6mg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017220024-bqgx6mg","linewrap":"true","updated":"20251017221424"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"1.修改 Cargo.toml 文件，在 [dependencies] 区域添加一行：rand = \"0.8.3\"\n2.此时，如果你用的是 VSCode 和 rust-analyzer 插件，该插件会自动拉取该库，你可能需要等它完成后，再进行下一步（VSCode 左下角有提示）\n\nuse rand::Rng;\n\nfn main() {\n    let secret_number = rand::thread_rng().gen_range(1..101);\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017222110-oc1vfck","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251017222110-oc1vfck","updated":"20251017222257"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E4%BD%BF%E7%94%A8--%E7%AE%80%E5%8C%96%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F","TextMarkTextContent":"使用 "},{"Type":"NodeTextMark","TextMarkType":"a code","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E4%BD%BF%E7%94%A8--%E7%AE%80%E5%8C%96%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F","TextMarkTextContent":"{}"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E4%BD%BF%E7%94%A8--%E7%AE%80%E5%8C%96%E5%BC%95%E5%85%A5%E6%96%B9%E5%BC%8F","TextMarkTextContent":" 简化引入方式"}]},{"ID":"20251017222110-3dvupb2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017222110-3dvupb2","updated":"20251017222118"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::collections::{HashMap,BTreeMap,HashSet};\nuse std::{cmp::Ordering, io};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017222119-fb3nfqe","Type":"NodeParagraph","Properties":{"id":"20251017222119-fb3nfqe","updated":"20251017222244"},"Children":[{"Type":"NodeText","Data":"模块的self"}]},{"ID":"20251017222256-y8h4scg","Type":"NodeList","ListData":{},"Properties":{"id":"20251017222256-y8h4scg","updated":"20251017222256"},"Children":[{"ID":"20251017222256-3u37x92","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251017222256-3u37x92","updated":"20251017222256"},"Children":[{"ID":"20251017222256-js6njc4","Type":"NodeParagraph","Properties":{"id":"20251017222256-js6njc4","updated":"20251017222256"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"use self::xxx"},{"Type":"NodeText","Data":"​，表示加载当前模块中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"xxx"},{"Type":"NodeText","Data":"​。此时 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"self"},{"Type":"NodeText","Data":"​ 可省略"}]}]},{"ID":"20251017222256-7d2rtey","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20251017222256-7d2rtey","updated":"20251017222256"},"Children":[{"ID":"20251017222256-e3cfoqh","Type":"NodeParagraph","Properties":{"id":"20251017222256-e3cfoqh","updated":"20251017222256"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"use xxx::{self, yyy}"},{"Type":"NodeText","Data":"​，表示，加载当前路径下模块 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"xxx"},{"Type":"NodeText","Data":"​ 本身，以及模块 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"xxx"},{"Type":"NodeText","Data":"​ 下的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"yyy"},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20251017222315-eyu7n16","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20251017222315-eyu7n16","updated":"20251017225738"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E4%BD%BF%E7%94%A8--%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E9%A1%B9","TextMarkTextContent":"使用 "},{"Type":"NodeTextMark","TextMarkType":"a code","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E4%BD%BF%E7%94%A8--%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E9%A1%B9","TextMarkTextContent":"*"},{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E4%BD%BF%E7%94%A8--%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9D%97%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E9%A1%B9","TextMarkTextContent":" 引入模块下的所有项"}]},{"ID":"20251017222315-l2cfj22","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017222315-l2cfj22","updated":"20251017222319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"use std::collections::*;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017222319-atwkp76","Type":"NodeParagraph","Properties":{"id":"20251017222319-atwkp76","updated":"20251017222400"},"Children":[{"Type":"NodeText","Data":"当使用 * 来引入的时候要格外小心，因为你很难知道到底哪些被引入到了当前作用域中，有哪些会和你自己程序中的名称相冲突，对于编译器来说，本地同名类型的优先级更高。"}]},{"ID":"20251017222407-txdyrqk","Type":"NodeParagraph","Properties":{"id":"20251017222407-txdyrqk","updated":"20251017222423"},"Children":[{"Type":"NodeText","Data":"这种引用方式往往用于快速写测试代码"}]},{"ID":"20251017223405-p6lijkc","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20251017223405-p6lijkc","updated":"20251017225738"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://course.rs/basic/crate-module/use.html#%E9%99%90%E5%88%B6%E5%8F%AF%E8%A7%81%E6%80%A7%E8%AF%AD%E6%B3%95","TextMarkTextContent":"限制可见性语法"}]},{"ID":"20251017223407-g47dpex","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017223407-g47dpex","updated":"20251017223637"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aWZjb25maWc="},{"Type":"NodeCodeBlockCode","Data":"pub(crate) 或 pub(in crate::a) 就是限制可见性语法，前者是限制在整个包内可见，后者是通过绝对路径，限制在包内的某个模块内可见，总结一下：\n\npub 意味着可见性无任何限制\npub(crate) 表示在当前包可见\npub(self) 在当前模块可见\npub(super) 在父模块可见\npub(in \u003cpath\u003e) 表示在某个路径代表的模块中可见，其中 path 必须是父模块或者祖先模块\n\n\n\npub mod a {\n    pub const I: i32 = 3;\n\n    fn semisecret(x: i32) -\u003e i32 {\n        use self::b::c::J;\n        x + J\n    }\n\n    pub fn bar(z: i32) -\u003e i32 {\n        semisecret(I) * z\n    }\n    pub fn foo(y: i32) -\u003e i32 {\n        semisecret(I) + y\n    }\n\n    mod b {\n        pub(in crate::a) mod c {\n            pub(in crate::a) const J: i32 = 4;\n        }\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017224308-x81v6lh","Type":"NodeParagraph","Properties":{"id":"20251017224308-x81v6lh","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"在 Rust 语言中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mod.rs"},{"Type":"NodeText","Data":"​ 文件是一种特殊的文件名，它通常用于实现模块（module）的组织和管理。"}]},{"ID":"20251017224308-bm58e1a","Type":"NodeParagraph","Properties":{"id":"20251017224308-bm58e1a","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"具体来说，当我们在 Rust 语言中创建一个模块时，通常会在模块所在的目录下创建一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mod.rs"},{"Type":"NodeText","Data":"​ 的文件。这个 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mod.rs"},{"Type":"NodeText","Data":"​ 文件中通常包含了该模块的所有公共 API 的定义。"}]},{"ID":"20251017224308-aypivny","Type":"NodeParagraph","Properties":{"id":"20251017224308-aypivny","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"举个例子，假设我们有一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_module"},{"Type":"NodeText","Data":"​ 的模块，它的目录结构如下："}]},{"ID":"20251017224308-3yd42u7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017224308-3yd42u7","updated":"20251017224308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bm90cmFuc2xhdGU="},{"Type":"NodeCodeBlockCode","Data":"my_module/\n├── mod.rs\n├── foo.rs\n└── bar.rs\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017224308-f8qeeea","Type":"NodeParagraph","Properties":{"id":"20251017224308-f8qeeea","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"其中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mod.rs"},{"Type":"NodeText","Data":"​ 文件用于定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_module"},{"Type":"NodeText","Data":"​ 模块的公共 API，而 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"foo.rs"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bar.rs"},{"Type":"NodeText","Data":"​ 文件则用于实现这些 API。"}]},{"ID":"20251017224308-2b9xauz","Type":"NodeParagraph","Properties":{"id":"20251017224308-2b9xauz","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mod.rs"},{"Type":"NodeText","Data":"​ 文件中，通常会使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pub use"},{"Type":"NodeText","Data":"​ 语法来导出该模块中的公共 API，例如："}]},{"ID":"20251017224308-y6oc4j6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20251017224308-y6oc4j6","updated":"20251017224308"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cnVzdA=="},{"Type":"NodeCodeBlockCode","Data":"pub use foo::my_function1;\npub use bar::my_function2;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20251017224308-yvqqdaz","Type":"NodeParagraph","Properties":{"id":"20251017224308-yvqqdaz","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"在这个示例中，我们使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pub use"},{"Type":"NodeText","Data":"​ 语法将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"foo"},{"Type":"NodeText","Data":"​ 模块中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_function1()"},{"Type":"NodeText","Data":"​ 函数和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bar"},{"Type":"NodeText","Data":"​ 模块中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_function2()"},{"Type":"NodeText","Data":"​ 函数导出为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"my_module"},{"Type":"NodeText","Data":"​ 模块的公共 API。"}]},{"ID":"20251017224308-ng09y1t","Type":"NodeParagraph","Properties":{"id":"20251017224308-ng09y1t","updated":"20251017224308"},"Children":[{"Type":"NodeText","Data":"总之，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mod.rs"},{"Type":"NodeText","Data":"​ 文件是 Rust 语言中非常常用的一个文件，它可以帮助我们组织和管理模块，并实现代码的可重用性和可读性。"}]},{"ID":"20251017224310-5o7br18","Type":"NodeParagraph","Properties":{"id":"20251017224310-5o7br18","style":"font-size: 36px;","updated":"20251017225709"},"Children":[{"Type":"NodeText","Data":"！！！！！！！"}]},{"ID":"20251017225709-axvxqhn","Type":"NodeParagraph","Properties":{"id":"20251017225709-axvxqhn","style":"font-size: 36px;","updated":"20251017225738"},"Children":[{"Type":"NodeText","Data":"2018之后就不需要强制mod.rs，直接文件名的同名文件.rs  my_module.rs"}]}]}